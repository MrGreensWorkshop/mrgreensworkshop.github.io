<!DOCTYPE html><html lang="ja-JP"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>3Dプリンターを買う?作る?それとも… 2</title><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" media="print" onload="this.media='all'"> <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"> </noscript><link rel="preconnect dns-prefetch" href="https://www.googletagmanager.com" crossorigin><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><meta name="google-site-verification" content="V8_OYoa-HOun0n_6OmlNBjYry1ZE9SZU1CwLv9GlD5k"><link rel="manifest" href="/assets/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" content="#f0f0f0"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Mr. Green's Workshop's App"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="msapplication-TileColor" content="#2d89ef"><meta name="msapplication-starturl" content="/"><meta name="application-name" content="Mr. Green's Workshop's App"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><link rel="canonical" href="https://www.mrgreensworkshop.com/ja/2022-05-29-diy-3d-printer-part-2" /><link rel="alternate" hreflang="ja-JP" href="https://www.mrgreensworkshop.com/ja/2022-05-29-diy-3d-printer-part-2" /><link rel="alternate" hreflang="ja" href="https://www.mrgreensworkshop.com/ja/2022-05-29-diy-3d-printer-part-2" /><link rel="alternate" hreflang="x-default" href="https://www.mrgreensworkshop.com/posts/2022-05-29-diy-3d-printer-part-2" /><link rel="alternate" hreflang="en-US" href="https://www.mrgreensworkshop.com/posts/2022-05-29-diy-3d-printer-part-2" /><link rel="alternate" hreflang="en" href="https://www.mrgreensworkshop.com/posts/2022-05-29-diy-3d-printer-part-2" /><meta name="keywords" content="3Dプリンター, 3Dプリンター, DIY"><meta name="description" content="自作3Dプリンターにかかる費用、安い3Dプリンターの問題点の改善、解決方法、3Dプリンターのパーツの加工、3Dプリンターのアップグレード"><meta name="robots" content="index, follow"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="3Dプリンターを買う?作る?それとも… 2"><meta name="twitter:site" content="@MrGreenWrkshop"><meta name="twitter:description" content="自作3Dプリンターにかかる費用、安い3Dプリンターの問題点の改善、解決方法、3Dプリンターのパーツの加工、3Dプリンターのアップグレード"><meta name="twitter:image" content="https://www.mrgreensworkshop.com/assets/img/posts/id_diy_3d_printer_part1/mainja.jpg"><meta property="og:site_name" content="Mr. Green's Workshop"><meta property="og:type" content="article"><meta property="og:title" content="3Dプリンターを買う?作る?それとも… 2"><meta property="og:description" content="自作3Dプリンターにかかる費用、安い3Dプリンターの問題点の改善、解決方法、3Dプリンターのパーツの加工、3Dプリンターのアップグレード"><meta property="og:url" content="https://www.mrgreensworkshop.com/ja/2022-05-29-diy-3d-printer-part-2"><meta property="og:image" content="https://www.mrgreensworkshop.com/assets/img/posts/id_diy_3d_printer_part1/mainja.jpg"><meta property="og:locale" content="ja_JP" ><meta property="og:locale:alternate" content="en_US"><meta property="article:author" content="Mr. Green's Workshop"><meta property="article:section" content="3Dプリンター"><meta property="article:tag" content="3Dプリンター"><meta property="article:tag" content="DIY"> <script type="application/ld+json">{ "@context": "https://schema.org" ,"@graph": [ { "@type": "Person" ,"@id": "https://www.mrgreensworkshop.com/ja/#person" ,"name": "Mr. Green's Workshop" ,"url": "https://www.mrgreensworkshop.com/ja/tabs/about.html" ,"image": "https://www.mrgreensworkshop.com/assets/img/about/about.jpg" ,"description": "Mr. Green's Workshop は、プログラミング、ホームオートメーション(IoT)、電子工作、マイコン、DIY、3Dプリンター、ロボット、加工 / CNC、サーバー関連などのプロジェクトやコンテンツを作っています。" },{ "@type": "WebSite" ,"@id": "https://www.mrgreensworkshop.com/ja/#website" ,"url": "https://www.mrgreensworkshop.com/ja/" ,"name": "Mr. Green's Workshop" ,"description": "Mr. Green's Workshop は、プログラミング、ホームオートメーション(IoT)、電子工作、マイコン、DIY、3Dプリンター、ロボット、加工 / CNC、サーバー関連などのプロジェクトやコンテンツを作っています。" ,"publisher": {"@id": "https://www.mrgreensworkshop.com/ja/#person"} ,"inLanguage": "ja-JP" ,"sameAs": ["https://www.youtube.com/@MrGreensWorkshopJp","https://twitter.com/MrGreenWrkshop","https://www.instagram.com/mrgreenworkshop","https://github.com/MrGreensWorkshop/MrGreensWorkshop/blob/main/README-jp.md#readme","https://ko-fi.com/MrGreenWorkshop","https://www.patreon.com/MrGreenWorkshop"] ,"copyrightHolder" : {"@id": "https://www.mrgreensworkshop.com/ja/#person"} ,"copyrightYear" : "2022" },{ "@type": "WebPage" ,"@id": "https://www.mrgreensworkshop.com/ja/2022-05-29-diy-3d-printer-part-2#webpage" ,"url": "https://www.mrgreensworkshop.com/ja/2022-05-29-diy-3d-printer-part-2" ,"name": "3Dプリンターを買う?作る?それとも… 2" ,"isPartOf": {"@id": "https://www.mrgreensworkshop.com/ja/#website"} ,"breadcrumb": {"@id": "https://www.mrgreensworkshop.com/ja/2022-05-29-diy-3d-printer-part-2#breadcrumb"} ,"primaryImageOfPage": "https://www.mrgreensworkshop.com/assets/img/posts/id_diy_3d_printer_part1/mainja.jpg" ,"description": "自作3Dプリンターにかかる費用、安い3Dプリンターの問題点の改善、解決方法、3Dプリンターのパーツの加工、3Dプリンターのアップグレード" ,"inLanguage": "ja-JP" ,"potentialAction": { "@type": "ReadAction" ,"target": "https://www.mrgreensworkshop.com/ja/2022-05-29-diy-3d-printer-part-2" } },{ "@type": "BreadcrumbList", "@id": "https://www.mrgreensworkshop.com/ja/2022-05-29-diy-3d-printer-part-2#breadcrumb", "itemListElement": [ { "@type": "ListItem" ,"position": 1 ,"name": "ホーム" ,"item": "https://www.mrgreensworkshop.com/ja/" }, { "@type": "ListItem" ,"position": 2 ,"name": "ブログ" ,"item": "https://www.mrgreensworkshop.com/ja/tabs/blog/" }, { "@type": "ListItem" ,"position": 3 ,"name": "3Dプリンターを買う?作る?それとも… 2" } ] },{ "@type": "BlogPosting" ,"@id": "https://www.mrgreensworkshop.com/ja/2022-05-29-diy-3d-printer-part-2#content" ,"isPartOf": {"@id": "https://www.mrgreensworkshop.com/ja/2022-05-29-diy-3d-printer-part-2#webpage"} ,"mainEntityOfPage": {"@id": "https://www.mrgreensworkshop.com/ja/2022-05-29-diy-3d-printer-part-2#webpage"} ,"publisher": {"@id": "https://www.mrgreensworkshop.com/ja/#person"} ,"author": {"@id": "https://www.mrgreensworkshop.com/ja/#person"} ,"inLanguage": "ja-JP" ,"headline": "3Dプリンターを買う?作る?それとも… 2" ,"image": "https://www.mrgreensworkshop.com/assets/img/posts/id_diy_3d_printer_part1/mainja.jpg" ,"thumbnailUrl": "https://www.mrgreensworkshop.com/assets/img/posts/id_diy_3d_printer_part1/mainja.jpg" ,"articleSection": ["3Dプリンター", "3Dプリンター", "DIY"] ,"description": "自作3Dプリンターにかかる費用、安い3Dプリンターの問題点の改善、解決方法、3Dプリンターのパーツの加工、3Dプリンターのアップグレード" ,"copyrightHolder" : {"@id": "https://www.mrgreensworkshop.com/ja/#person"} ,"copyrightYear" : "2022" ,"wordCount": 190 ,"articleBody": "パート１を読んでいない場合は、是非読んでみてください。 この投稿では、様々な問題にどう対処し、いくらかかったかについてお話します。相当探しましたが、3軸のロボットをオークションで発見！なんと、1200円でした。取りに行くのに、車で３時間かかりましたが、まーいいでしょう…。既にYouTubeビデオを公開していますので是非見てください。 分解 ロボットを分解したら、中はこうでした。 24V 10Aの電源 3つのエンコーダ付きステッピングモーター 3つのクローズループモーションコントローラー Z軸に搭載されているステッピングモーター ステッピングモータードライバー(オープンループ) 3軸すべてに通過型光センサー 機械スペック 武蔵エンジニアリング 卓上型ロボット ShotMaster 500DS   移動距離 分解能 最大速度 X,Y 500mm 4.2μ 800mm/s Z 120mm 1μ 170mm/s 作りに申し分なく、さすがです。まー3Dプリンターにするにはもったいないけどね。このプロジェクトにおいて、あるルールを決めました。パート１で伝えたアップグレードパーツを少しずつ買い、組み立てて行って、もし、うまくいかなさそうだったら、そのパーツを安いプリンターのアップグレードに使おうと。まーそう簡単に諦めないけどね。 課題と問題 既存のコントローラーは使えない ロボットには、RS232Cインターフェースがあって、独自のプロトコルで通信可能。 最初は、マーリンのファームウェアを改造し、座標をRS232C経由で送ろうと思っていました。でも、マーリンのステップパルス発信のソースコードを確認し、そして、ディスコードのマーリンのチャットルームで聞いたら、座標をパルスに変換するだけでなく、場合によって、追加パルスを送ると知りました。既存のコントローラーボードを外し、それぞれの軸を3Dプリンターのコントローラーから制御する必要がありました。実は、これでもっとシンプルになりました。これにより、マーリンはそれぞれの軸を自在に制御できます。色々調べたら、モーションコントローラーのピン配置がわかりました。 各方向でRS422でのパルスを使っています。3DプリンターコントローラーからのTTLの方向とパルス信号をRS422信号に変換し、モーションコントローラーに接続する回路を作りました。回路図はこんな感じです。 ダイレクト式押出機の作成 機械の付属アルミプレートと古いヒートシンクを材料にしました。 さっき言ったように、4つ目のステッピングモーターがありますが、押出機フィーダーには小さすぎます。既存のステッピングモータードライバーを使いたかったので、オークションで5極ステッピングモーターを1000円で購入。金属製の押出機フィーダーパーツも購入し、ステッピングモーターに取り付けました。 押出機フィーダーステッピングモータードライバーのアップグレード 押出機フィーダーをテストしたら、ステップをスキップしていました。トルクが足りなかったんです。ドライバーのデータシートを確認したら、ドライバーに電流制限の設定があって、最大にしてもトルクが足りませんでした。オリエンタルモーターのカタログを確認したら、より高い電流の別のモデルがありました。 ドライバ モーター 定格電流 DFC5103P 0.35 A/相 DFC5107P 0.75 A/相 電流制限に使うパーツと言えば、やっぱりセメント抵抗ですよね。ドライバー基板に2つ付いてました。 使いたい電流の別のモデルの抵抗値は持っているモデルのと違っていたので、抵抗を注文し、交換しました。そして、思った通りに動作しました。これにより、オリエンタルモーターDFC5103PがDFC5107Pにアップグレードできました。 色々組み立てて行ったら 押出機を完成させて、Z軸に取り付けました。Z軸は120mmしかないので、ベースを上げる必要があって、そのためにテスト用に段ボールを使いました。周りにちょうどいいものがなくて…。 コントローラの準備　よし、必要なケーブル接続　よし、 ベルトの張り調整　よし、PIDキャリブレーション　よし、ステップキャリブレーション　よし。次は何かしらプリントするだけだ！ 初めてのプリントとレイヤーシフト問題 作業を続けるにあたり3Dプリンターとして、機能するか確認する必要がありました。テストキューブをプリントしました。これ？キューブ？ メッチャ凹みました。これまで、何も問題なさそうでした。ディスコードのマーリンのチャットルームで聞いたら、昔、外部ドライバーを使っていて同じような問題を抱えていた人がいたと親切な方に教えてもらいました。いくつかアドバイスをもらい、その1つがステップ信号を反転することでした。やってみたら、うまくいきました。 #define INVERT_X_STEP true #define INVERT_Y_STEP true Z軸のアップグレード Z軸を交換しなくちゃいけないです。一生段ボールの上にプリントする訳にいかないよね。またオークションで宝探しを始め、IAI単軸ロボシリンダーをドライバー込みで3000円で購入。既存のコントローラーはパルスドライブと互換性がありませんでした。設定は変更できますが、ケーブルもソフトウェアもありませんでした。そこで、ロボットのZ軸モーターをIAIロボシリンダーのメカに取り付けることにしました。モーターを外して、既存のカプラーと同じものを作りました。 押出機モジュールをシリンダーに、シリンダーを機械に取り付けるために必要な部品を作りました。モーター用取付板を作って、六角スペーサーを使って取り付けました。 取付板の穴はもっときれいにできたかもね、まー使えるし、隠れるし、いいっしょ。これにより、最大プリント領域は500x500x200mmになりました。 安全装置 この機械にはIO接続ボードがあります。ジャンパーしたり、電子部品を足したりして、電気的緊急停止機能を追加しました。起動時に、緊急モードになります。運転モードにするには、リセットボタンを押す必要があります。それで、モーションコントローラの電源が投入されます。非常停止ボタンを押すと、モーションコントローラの電源が切れます。非常停止ボタンを解除しても、運転モードにするにはリセットボタンを押す必要があります。ユーザーに2つのアクションをさせることは、よく知られている業界の安全対策の1つです。 ケーブルチェーンの取り付け やっと、配線だ。Y軸とZ軸用のケーブルチェーンを買い、取り付けました。配線は結構時間がかかりました。 大変でしたが、出来は悪くないでしょう？ ワーク冷却用ダクト シンギバースで検索し、いくつかのデザインを見つけました。 STLファイルをティンカーキャドにインポートし、全部組み合わせました。 その結果、こうなりました。 自動ベッドレベリング Z軸に付いている近接センサーが気になるかもしれません。取り付け後にテストしたけれど、再現精度があまり良くなくて、今は使っていません。 消費電力 消費電力を確認したところ、この電源で十分だと思います。 状態 電流 待機(非常停止ON) 0.638A サーボON待機 1.6A 原点復帰最大 1.6A ノズル温度が195C 3A ノズル温度経過 2A プリント中最大 3A - 電源　　　: 24V 10A (TDK LAMBDA ZWS240PAF-24) - ヒーター　: 24V 1.66A (40W) 最終費用 予算計画 選択肢 3, DIY + ジャンク3軸ロボット + アップグレード ジャンク3軸ロボット : 8000円 アップグレード 　 　: 2万円 合計 　 : 2万8000円 実際の費用 3軸ロボット ジャンク 1200円 IAIロボットシリンダー ジャンク 3000円 ホットエンド MK8 24V 40W 2899円 ホットエンドシリコンカバー   225円 押出機メカ MK8 1199円 押出機フィーダーステッピングモーター ジャンク 1000円 コントローラー Bigtreetech SKR v1.3 3099円 操作パネル Bigtreetech TFT 3.5 V3.0 3999円 ケーブルチェーン　   2170円 ワーク冷却用ファン 50x50x15mm 495円 押出機冷却用ファン Noctua NF-A4x10 FLX 2295円 信号変換基板   2221円 手持ちのパーツ   0円 合計：   2万3802円 パート１で話していた長所の中で、私にとってモノづくりする上で、最も重要としているSDGsの観点で、廃棄物の量を減らすことに貢献できたのではないかと思います。 クローズアップ 制作過程など他の写真をインスタに載せています。私についてページからアクセスできます。 スポンサーシップ 何もないところからプロジェクトを立ち上げるのは、とても時間がかかるものです。私がこの様なプロジェクトに取り組み続け、皆さんに新しいコンテンツを提供できるよう、支援をご検討いただければ幸いです。 Patreonで支援する（月々） Ko-fiで支援する (一回) GitHubでスポンサーになる (一回／月々) 最後に 今後の予定、Z軸用カバー、操作パネル用ボック、ぐらいですかね。" } ] }</script><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><link href="/assets/css/main.css" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v0.4.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.css"><link href="/assets/css/nav-media.css" rel="stylesheet"></head><body > <script src="/assets/js/color-scheme-attr-init.js" data-mode="false"></script><nav class="navbar navbar-default top-nav"><div class="navbar-header"> <button type="button" aria-label="サイドメニュー" class="navbar-toggle collapsed pull-left top-nav-menu-toggle" data-toggle="collapse" data-target="#id_top-nav-menu-toggle" aria-expanded="false"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand top-nav-brand" href="/ja/" translate="no">Mr. Green's Workshop</a></div><div class="color_scheme_switch_top_holder" data-toggle="tooltip" data-placement="bottom" title="配色"> <label class="color-scheme-switch hover-effect"> <input type="checkbox" class="checkbox_color_switch" /> <span></span> </label></div></nav><nav id="side-nav-container"><div class="side-nav"><div class="side-nav-brand"> <img src="/assets/img/about/about.jpg" alt=""><div class="brand-holder"></div><p>&nbsp;</p><br><div class="lang-switch"><p>[&nbsp;</p><ul translate="no"><li lang="en-US"><a href="/posts/2022-05-29-diy-3d-printer-part-2" class=" hover-effect">En&nbsp;</a></li><li lang="ja-JP"><a href="/ja/2022-05-29-diy-3d-printer-part-2" class=" active-page hover-effect">Jp&nbsp;</a></li></ul><p>]</p></div></div><br> <a href="javascript:void(0);" class="side-nav-close" role="button" rel="nofollow"> <i class="fa fa-angle-double-left fa-2x" aria-hidden="true"></i> </a><hr> <br><div class="side-nav-buttons"><ul class="nav nav-pills nav-stacked"><li ><a href="/ja/" class=" hover-effect"><i class="fa-fw fa fa-home" aria-hidden="true"></i>ホーム</a></li><li ><a href="/ja/tabs/blog/" class="active-page hover-effect"><i class="fa-fw fa fa-pencil-square-o" aria-hidden="true"></i>ブログ</a></li><li ><a href="/ja/tabs/archive.html" class=" hover-effect"><i class="fa-fw fa fa-archive" aria-hidden="true"></i>アーカイブ</a></li><li ><a href="/ja/tabs/about.html" class=" hover-effect"><i class="fa-fw fa fa-user-o" aria-hidden="true"></i>私について</a></li></ul></div><br> <br><div class="contact-container"><hr><h3>コンタクト</h3><ul><li><a href="https://www.youtube.com/@MrGreensWorkshopJp" aria-label="youtube" class="hover-effect-big" target="_blank" rel="noopener noreferrer"><i class="fa fa-youtube-play" aria-hidden="true"></i></a></li><li><a href="https://twitter.com/MrGreenWrkshop" aria-label="twitter" class="hover-effect-big" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a href="https://www.instagram.com/mrgreenworkshop" aria-label="instagram" class="hover-effect-big" target="_blank" rel="noopener noreferrer"><i class="fa fa-instagram" aria-hidden="true"></i></a></li><li><a href="https://github.com/MrGreensWorkshop/MrGreensWorkshop/blob/main/README-jp.md#readme" aria-label="github" class="hover-effect-big" target="_blank" rel="noopener noreferrer"><i class="fa fa-github" aria-hidden="true"></i></a></li><li><a href="https://ko-fi.com/MrGreenWorkshop" aria-label="ko-fi" class="hover-effect-big" target="_blank" rel="noopener noreferrer"><img src="/assets/img/default/kofi.svg" alt="ko-fi"/></a></li><li><a href="https://www.patreon.com/MrGreenWorkshop" aria-label="patreon" class="hover-effect-big" target="_blank" rel="noopener noreferrer"><img src="/assets/img/default/patreon.svg" alt="patreon"/></a></li></ul></div><hr id="toc-view-top"><div class="side-nav-footer" translate="no"><p>&copy; 2022 Mr. Green's Workshop.</p></div></div><div class="side-nav-bottom-buttons-container"><hr><ul><li><div class="color_scheme_switch_side_holder" data-toggle="tooltip" data-placement="top" title="配色"> <label class="color-scheme-switch hover-effect"> <input type="checkbox" class="checkbox_color_switch" /> <span></span> </label></div></li><li><div class="cookie-icon hover-effect" onclick="CookieConsent.showSettings();" data-toggle="tooltip" data-placement="top" title="クッキー設定"><div class="cookie-wrapper"> <i class="fa fa-circle bitten-cookie" aria-hidden="true"></i> <i class="fa fa-circle small-ellipse-icon" aria-hidden="true"></i> <i class="fa fa-spinner inner-icon" aria-hidden="true"></i> <i class="fa fa-circle-thin outer-icon" aria-hidden="true"></i></div></div></li></ul></div></nav><div id="toc-container" class="movable"><div class="panel panel-default"><div class="panel-heading" data-toggle="tooltip" data-placement="top" title="ドラッグして移動"> 見出し <span class="pull-right"> <a href="javascript:void(0);" aria-label="閉じる" role="button" rel="nofollow" class="close-button" onclick="document.getElementById('toc-container').style.display = 'none';"> <i class="fa fa-times" data-toggle="tooltip" data-placement="bottom" title="閉じる"></i> </a> </span></div><div class="panel-body"><nav id="table-of-contents"></nav></div></div></div><div id="main-wrapper"><div class="main-container"><div class="multipurpose-container post-container"><div class="post-title"><h1>3Dプリンターを買う?作る?それとも… 2</h1></div><div class="meta"> <small> &nbsp;<i class="fa fa-calendar"></i>&nbsp;&nbsp;2022年05月29日 </small> <small> &nbsp;&nbsp;&nbsp;<span><i class="fa fa-clock-o"></i>&nbsp;8分で読めます</span> </small></div><hr/><div class="markdown-style"><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part1/mainja.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part1/mainja.jpg" alt="自作3Dプリンター" data-align="center" /></p><p><a href="2022-05-29-diy-3d-printer-part-1">パート１</a>を読んでいない場合は、是非読んでみてください。 この投稿では、様々な問題にどう対処し、いくらかかったかについてお話します。相当探しましたが、3軸のロボットをオークションで発見！なんと、1200円でした。取りに行くのに、車で３時間かかりましたが、まーいいでしょう…。既にYouTubeビデオを公開していますので是非見てください。</p><div class="video-wrapper video-centered"><div class="video-container"> <iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/2x4xXKTHoh0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><h3 id="分解">分解</h3><p>ロボットを分解したら、中はこうでした。</p><p>24V 10Aの電源</p><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_00_31_300_psu.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_00_31_300_psu.jpg" alt="電源" data-align="center" /></p><p>3つのエンコーダ付きステッピングモーター</p><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_00_35_500_stepper.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_00_35_500_stepper.jpg" alt="ステッピングモーター(エンコーダ付き)" data-align="center" /></p><p>3つのクローズループモーションコントローラー</p><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_00_38_467_driver.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_00_38_467_driver.jpg" alt="クローズループモーションコントローラー" data-align="center" /></p><p>Z軸に搭載されているステッピングモーター</p><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_00_41_700_4th_axis.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_00_41_700_4th_axis.jpg" alt="ステッピングモーター" data-align="center" /></p><p>ステッピングモータードライバー(オープンループ) <img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_00_44_067_4th_ax_driver.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_00_44_067_4th_ax_driver.jpg" alt="ステッピングモータードライバー" data-align="center" /></p><p>3軸すべてに通過型光センサー <img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_00_45_667_sensor.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_00_45_667_sensor.jpg" alt="通過型光センサー" data-align="center" /></p><h3 id="機械スペック">機械スペック</h3><p>武蔵エンジニアリング 卓上型ロボット ShotMaster 500DS</p><table class="table table-striped"><thead><tr><th style="text-align: left"> </th><th style="text-align: left">移動距離</th><th style="text-align: right">分解能</th><th style="text-align: right">最大速度</th></tr></thead><tbody><tr><td style="text-align: left">X,Y</td><td style="text-align: left">500mm</td><td style="text-align: right">4.2μ</td><td style="text-align: right">800mm/s</td></tr><tr><td style="text-align: left">Z</td><td style="text-align: left">120mm</td><td style="text-align: right">1μ</td><td style="text-align: right">170mm/s</td></tr></tbody></table><p>作りに申し分なく、さすがです。まー3Dプリンターにするにはもったいないけどね。このプロジェクトにおいて、あるルールを決めました。<a href="2022-05-29-id_diy_3d_printer_part1">パート１</a>で伝えたアップグレードパーツを少しずつ買い、組み立てて行って、もし、うまくいかなさそうだったら、そのパーツを安いプリンターのアップグレードに使おうと。まーそう簡単に諦めないけどね。</p><h3 id="課題と問題">課題と問題</h3><h4 id="既存のコントローラーは使えない">既存のコントローラーは使えない</h4><p>ロボットには、RS232Cインターフェースがあって、独自のプロトコルで通信可能。</p><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_01_22_667_rs232.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_01_22_667_rs232.jpg" alt="RS232Cインターフェース" data-align="center" /></p><p>最初は、マーリンのファームウェアを改造し、座標をRS232C経由で送ろうと思っていました。でも、マーリンのステップパルス発信のソースコードを確認し、そして、ディスコードのマーリンのチャットルームで聞いたら、座標をパルスに変換するだけでなく、場合によって、追加パルスを送ると知りました。既存のコントローラーボードを外し、それぞれの軸を3Dプリンターのコントローラーから制御する必要がありました。実は、これでもっとシンプルになりました。これにより、マーリンはそれぞれの軸を自在に制御できます。色々調べたら、モーションコントローラーのピン配置がわかりました。</p><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_02_05_100_xyz_driver.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_02_05_100_xyz_driver.jpg" alt="モーションコントローラー" data-align="center" /></p><p>各方向でRS422でのパルスを使っています。3DプリンターコントローラーからのTTLの方向とパルス信号をRS422信号に変換し、モーションコントローラーに接続する回路を作りました。回路図はこんな感じです。</p><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_02_11_033_schematic.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_02_11_033_schematic.jpg" alt="回路図" data-align="center" /></p><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_02_17_233_circuit.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_02_17_233_circuit.jpg" alt="基板" data-align="center" /></p><h4 id="ダイレクト式押出機の作成">ダイレクト式押出機の作成</h4><p>機械の付属アルミプレートと古いヒートシンクを材料にしました。</p><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_02_28_700_extruder.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_02_28_700_extruder.jpg" alt="ダイレクト式押出機" data-align="center" /></p><p>さっき言ったように、4つ目のステッピングモーターがありますが、押出機フィーダーには小さすぎます。既存のステッピングモータードライバーを使いたかったので、オークションで5極ステッピングモーターを1000円で購入。金属製の押出機フィーダーパーツも購入し、ステッピングモーターに取り付けました。</p><h4 id="押出機フィーダーステッピングモータードライバーのアップグレード">押出機フィーダーステッピングモータードライバーのアップグレード</h4><p>押出機フィーダーをテストしたら、ステップをスキップしていました。トルクが足りなかったんです。ドライバーのデータシートを確認したら、ドライバーに電流制限の設定があって、最大にしてもトルクが足りませんでした。オリエンタルモーターのカタログを確認したら、より高い電流の別のモデルがありました。</p><table class="table table-striped"><thead><tr><th style="text-align: left">ドライバ</th><th style="text-align: center">モーター 定格電流</th></tr></thead><tbody><tr><td style="text-align: left">DFC5103P</td><td style="text-align: center">0.35 A/相</td></tr><tr><td style="text-align: left">DFC5107P</td><td style="text-align: center">0.75 A/相</td></tr></tbody></table><p>電流制限に使うパーツと言えば、やっぱりセメント抵抗ですよね。ドライバー基板に2つ付いてました。</p><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_03_24_433_4th_driver.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_03_24_433_4th_driver.jpg" alt="押出機フィーダーステッピングモータードライバー" data-align="center" /></p><p>使いたい電流の別のモデルの抵抗値は持っているモデルのと違っていたので、抵抗を注文し、交換しました。そして、思った通りに動作しました。これにより、オリエンタルモーターDFC5103PがDFC5107Pにアップグレードできました。</p><h4 id="色々組み立てて行ったら">色々組み立てて行ったら</h4><p>押出機を完成させて、Z軸に取り付けました。Z軸は120mmしかないので、ベースを上げる必要があって、そのためにテスト用に段ボールを使いました。周りにちょうどいいものがなくて…。</p><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_03_29_433_box.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_03_29_433_box.jpg" alt="段ボールの上でプリント" data-align="center" /></p><p>コントローラの準備　よし、必要なケーブル接続　よし、 ベルトの張り調整　よし、PIDキャリブレーション　よし、ステップキャリブレーション　よし。次は何かしらプリントするだけだ！</p><h4 id="初めてのプリントとレイヤーシフト問題">初めてのプリントとレイヤーシフト問題</h4><p>作業を続けるにあたり3Dプリンターとして、機能するか確認する必要がありました。テストキューブをプリントしました。これ？キューブ？</p><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_04_17_733_first_print.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_04_17_733_first_print.jpg" alt="初めてのプリント" data-align="center" /></p><p>メッチャ凹みました。これまで、何も問題なさそうでした。ディスコードのマーリンのチャットルームで聞いたら、昔、外部ドライバーを使っていて同じような問題を抱えていた人がいたと親切な方に教えてもらいました。いくつかアドバイスをもらい、その1つがステップ信号を反転することでした。やってみたら、うまくいきました。</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#define INVERT_X_STEP true
#define INVERT_Y_STEP true
</code></pre></div></div><h4 id="z軸のアップグレード">Z軸のアップグレード</h4><p>Z軸を交換しなくちゃいけないです。一生段ボールの上にプリントする訳にいかないよね。またオークションで宝探しを始め、IAI単軸ロボシリンダーをドライバー込みで3000円で購入。既存のコントローラーはパルスドライブと互換性がありませんでした。設定は変更できますが、ケーブルもソフトウェアもありませんでした。そこで、ロボットのZ軸モーターをIAIロボシリンダーのメカに取り付けることにしました。モーターを外して、既存のカプラーと同じものを作りました。</p><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_05_15_367_coupler.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_05_15_367_coupler.jpg" alt="カプラー" data-align="center" /></p><p>押出機モジュールをシリンダーに、シリンダーを機械に取り付けるために必要な部品を作りました。モーター用取付板を作って、六角スペーサーを使って取り付けました。</p><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_05_18_733_parts.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_05_18_733_parts.jpg" alt="自作パーツ" data-align="center" /></p><p>取付板の穴はもっときれいにできたかもね、まー使えるし、隠れるし、いいっしょ。これにより、最大プリント領域は500x500x200mmになりました。</p><h4 id="安全装置">安全装置</h4><p>この機械にはIO接続ボードがあります。ジャンパーしたり、電子部品を足したりして、電気的緊急停止機能を追加しました。起動時に、緊急モードになります。運転モードにするには、リセットボタンを押す必要があります。それで、モーションコントローラの電源が投入されます。非常停止ボタンを押すと、モーションコントローラの電源が切れます。非常停止ボタンを解除しても、運転モードにするにはリセットボタンを押す必要があります。ユーザーに2つのアクションをさせることは、よく知られている業界の安全対策の1つです。</p><h4 id="ケーブルチェーンの取り付け">ケーブルチェーンの取り付け</h4><p>やっと、配線だ。Y軸とZ軸用のケーブルチェーンを買い、取り付けました。配線は結構時間がかかりました。 大変でしたが、出来は悪くないでしょう？</p><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_06_38_233_cabling_done.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_06_38_233_cabling_done.jpg" alt="配線後の状態" data-align="center" /></p><h4 id="ワーク冷却用ダクト">ワーク冷却用ダクト</h4><p>シンギバースで検索し、いくつかのデザインを見つけました。 STLファイルをティンカーキャドにインポートし、全部組み合わせました。 その結果、こうなりました。</p><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_06_48_500_duct.jpg" data-src="/assets/img/posts/id_diy_3d_printer_part2/Shotcut_00_06_48_500_duct.jpg" alt="ワーク冷却用ダクト" data-align="center" /></p><h4 id="自動ベッドレベリング">自動ベッドレベリング</h4><p>Z軸に付いている近接センサーが気になるかもしれません。取り付け後にテストしたけれど、再現精度があまり良くなくて、今は使っていません。</p><h3 id="消費電力">消費電力</h3><p>消費電力を確認したところ、この電源で十分だと思います。</p><table class="table table-striped"><thead><tr><th style="text-align: left">状態</th><th style="text-align: left">電流</th></tr></thead><tbody><tr><td style="text-align: left">待機(非常停止ON)</td><td style="text-align: left">0.638A</td></tr><tr><td style="text-align: left">サーボON待機</td><td style="text-align: left">1.6A</td></tr><tr><td style="text-align: left">原点復帰最大</td><td style="text-align: left">1.6A</td></tr><tr><td style="text-align: left">ノズル温度が195C</td><td style="text-align: left">3A</td></tr><tr><td style="text-align: left">ノズル温度経過</td><td style="text-align: left">2A</td></tr><tr><td style="text-align: left">プリント中最大</td><td style="text-align: left">3A</td></tr></tbody></table><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- 電源　　　: 24V 10A (TDK LAMBDA ZWS240PAF-24)
- ヒーター　: 24V 1.66A (40W)
</code></pre></div></div><h3 id="最終費用">最終費用</h3><p><strong>予算計画</strong></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>選択肢 3,  DIY + ジャンク3軸ロボット + アップグレード

ジャンク3軸ロボット    : 8000円
アップグレード   　  　: 2万円
合計            　   : 2万8000円
</code></pre></div></div><p><strong>実際の費用</strong></p><table class="table table-striped"><tbody><tr><td>3軸ロボット</td><td>ジャンク</td><td>1200円</td></tr><tr><td>IAIロボットシリンダー</td><td>ジャンク</td><td>3000円</td></tr><tr><td>ホットエンド</td><td>MK8 24V 40W</td><td>2899円</td></tr><tr><td>ホットエンドシリコンカバー</td><td> </td><td>225円</td></tr><tr><td>押出機メカ</td><td>MK8</td><td>1199円</td></tr><tr><td>押出機フィーダーステッピングモーター</td><td>ジャンク</td><td>1000円</td></tr><tr><td>コントローラー</td><td>Bigtreetech SKR v1.3</td><td>3099円</td></tr><tr><td>操作パネル</td><td>Bigtreetech TFT 3.5 V3.0</td><td>3999円</td></tr><tr><td>ケーブルチェーン　</td><td> </td><td>2170円</td></tr><tr><td>ワーク冷却用ファン</td><td>50x50x15mm</td><td>495円</td></tr><tr><td>押出機冷却用ファン</td><td>Noctua NF-A4x10 FLX</td><td>2295円</td></tr><tr><td>信号変換基板</td><td> </td><td>2221円</td></tr><tr><td>手持ちのパーツ</td><td> </td><td>0円</td></tr><tr><td><strong>合計：</strong></td><td> </td><td><strong>2万3802円</strong></td></tr></tbody></table><p><a href="2022-05-29-diy-3d-printer-part-1">パート１</a>で話していた長所の中で、私にとってモノづくりする上で、最も重要としているSDGsの観点で、廃棄物の量を減らすことに貢献できたのではないかと思います。</p><h3 id="クローズアップ">クローズアップ</h3><p>制作過程など他の写真をインスタに載せています。<a href="/ja/tabs/about.html">私について</a>ページからアクセスできます。</p><h3 id="スポンサーシップ">スポンサーシップ</h3><p>何もないところからプロジェクトを立ち上げるのは、とても時間がかかるものです。私がこの様なプロジェクトに取り組み続け、皆さんに新しいコンテンツを提供できるよう、支援をご検討いただければ幸いです。</p><ul><li><a href="https://patreon.com/MrGreenWorkshop" title="Patreonで支援">Patreon</a>で支援する（月々）</li><li><a href="https://ko-fi.com/MrGreenWorkshop" title="Ko-fiで支援">Ko-fi</a>で支援する (一回)</li><li><a href="https://github.com/sponsors/MrGreensWorkshop" title="GitHubでスポンサーになる">GitHubでスポンサー</a>になる (一回／月々)</li></ul><h3 id="最後に">最後に</h3><p>今後の予定、Z軸用カバー、操作パネル用ボック、ぐらいですかね。</p><hr><div class="share-holder"> <span class="share-label">シェア: </span><ul class="share-buttons"><li> <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fwww.mrgreensworkshop.com%2Fja%2F2022-05-29-diy-3d-printer-part-2&amp;text=3D%E3%83%97%E3%83%AA%E3%83%B3%E3%82%BF%E3%83%BC%E3%82%92%E8%B2%B7%E3%81%86?%E4%BD%9C%E3%82%8B?%E3%81%9D%E3%82%8C%E3%81%A8%E3%82%82%E2%80%A6%202%20-%20Mr.%20Green&#39;s%20Workshop" aria-label="Twitter" role="button" target="_blank" rel="noopener noreferrer" data-toggle="tooltip" data-placement="top" title="Twitter" class="hover-effect-big"> <i class="fa fa-twitter-square fa-fw" aria-hidden="true"></i> </a></li><li> <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.mrgreensworkshop.com%2Fja%2F2022-05-29-diy-3d-printer-part-2" aria-label="Facebook" role="button" target="_blank" rel="noopener noreferrer" data-toggle="tooltip" data-placement="top" title="Facebook" class="hover-effect-big"> <i class="fa fa-facebook-square fa-fw" aria-hidden="true"></i> </a></li><li> <a href="https://t.me/share/url?url=https%3A%2F%2Fwww.mrgreensworkshop.com%2Fja%2F2022-05-29-diy-3d-printer-part-2&amp;text=3D%E3%83%97%E3%83%AA%E3%83%B3%E3%82%BF%E3%83%BC%E3%82%92%E8%B2%B7%E3%81%86?%E4%BD%9C%E3%82%8B?%E3%81%9D%E3%82%8C%E3%81%A8%E3%82%82%E2%80%A6%202%20-%20Mr.%20Green&#39;s%20Workshop" aria-label="Telegram" role="button" target="_blank" rel="noopener noreferrer" data-toggle="tooltip" data-placement="top" title="Telegram" class="hover-effect-big"> <i class="fa fa-telegram fa-fw" aria-hidden="true"></i> </a></li><li> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.mrgreensworkshop.com%2Fja%2F2022-05-29-diy-3d-printer-part-2" aria-label="LinkedIn" role="button" target="_blank" rel="noopener noreferrer" data-toggle="tooltip" data-placement="top" title="LinkedIn" class="hover-effect-big"> <i class="fa fa-linkedin-square fa-fw" aria-hidden="true"></i> </a></li><li> <a href="mailto:?subject=3D%E3%83%97%E3%83%AA%E3%83%B3%E3%82%BF%E3%83%BC%E3%82%92%E8%B2%B7%E3%81%86?%E4%BD%9C%E3%82%8B?%E3%81%9D%E3%82%8C%E3%81%A8%E3%82%82%E2%80%A6%202%20-%20Mr.%20Green&#39;s%20Workshop&amp;body=3D%E3%83%97%E3%83%AA%E3%83%B3%E3%82%BF%E3%83%BC%E3%82%92%E8%B2%B7%E3%81%86?%E4%BD%9C%E3%82%8B?%E3%81%9D%E3%82%8C%E3%81%A8%E3%82%82%E2%80%A6%202%20-%20Mr.%20Green&#39;s%20Workshop%20https%3A%2F%2Fwww.mrgreensworkshop.com%2Fja%2F2022-05-29-diy-3d-printer-part-2" aria-label="メール" role="button" target="_blank" rel="noopener noreferrer" data-toggle="tooltip" data-placement="top" title="メール" class="hover-effect-big"> <i class="fa fa-envelope fa-fw" aria-hidden="true"></i> </a></li><li> <a href="javascript:void(0);" aria-label="リンクをコピー" role="button" onclick="copyToClipboard('https://www.mrgreensworkshop.com/ja/2022-05-29-diy-3d-printer-part-2', 'リンクがコピーされました!')" id="copytoclipboard" data-toggle="tooltip" data-placement="top" title="リンクをコピー" class="hover-effect-big"> <i class="fa fa-link fa-fw" aria-hidden="true"></i> </a></li></ul></div></div></div><div class="pagination_wrapper"><nav aria-label="Page navigation"><ul class="pagination" style="opacity:0"><li><a href="javascript:void(0);" role="button">1</a></li></ul></nav></div><div id="comment_thread"><div id="giscus_thread"></div></div><noscript> コメントを表示するには、JavaScriptを有効にしてください。 </noscript></div><div class="footer-wrapper"><div class="footer-container"><footer translate="no"><div class="footer-text footer-text-centered long-copyright"><p>&copy; 2022 Mr. Green's Workshop. 著作権で保護されています。</p></div><p class="footer-powered"><span>Pwrd by </span><a href="https://github.com/MrGreensWorkshop/MrGreen-JekyllTheme" target="_blank" rel="noopener noreferrer">Mr. Green</a></p></footer></div></div><div class="scroll-to-top-container"> <a id="scroll-to-top" href="#main-wrapper" role="button" aria-label="トップへ戻る" class="hover-effect"><i class="fa fa-angle-up"></i></a></div></div><div class="searchbox-container"> <form id="searchbox-form" autocomplete="off"> <input type="search" id="search-box" placeholder="検索" onkeyup="if(this.value!==''){document.getElementById('search-results').style.display = 'block';}" onfocusout="this.value='';" onblur="setTimeout(function(){ document.getElementById('search-results').style.display = 'none'; }, 100);"><ul id="search-results" ></ul></form></div><script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v0.4.1/dist/bootstrap-toc.min.js"></script> <script src="/assets/js/main.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script> <script> $('.imgViewer[data-no-image-viewer]').css("cursor", "unset"); $(function () { $('.imgViewer:not([data-no-image-viewer])').magnificPopup({ type: 'image' ,image: { titleSrc: 'alt' /* Error message */ ,tError: "画像が読み込めませんでした。<br><br>%url%" /* Set to null to disable zoom out cursor. */ /*,cursor: null */ } ,closeOnContentClick: true ,showCloseBtn: false ,zoom: { /* By default it's false, so don't forget to enable it */ enabled: true /* duration of the effect, in milliseconds */ ,duration: 300 /* CSS transition easing function */ ,easing: 'ease-in-out' } }); }); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js"></script> <script> /* lazy loads elements with default selector as '.lozad' */ const observer = lozad(); observer.observe(); </script> <script> PagerPageNumbers.setProperties({ paginatorListContainerName: ".pagination_wrapper .pagination" ,pageList: ["/ja/2022-06-16-raspberry-pi-pico-zephyr-os-part-2", "/ja/2022-05-29-diy-3d-printer-part-2", "/ja/2022-05-29-diy-3d-printer-part-1", "/ja/2022-03-03-mr-green-jekyll-theme"] ,firstButtonName: "最初" ,lastButtonName: "最後" ,prevButtonName: "«" ,nextButtonName: "»" }); </script> <script src="/assets/js/simple-jekyll-search-1.9.2.min.js"></script><script> function loadSearch(jsonData, searchParam) { if (!jsonData) jsonData = '/ja/query/search.json'; var searchInput = document.getElementById('search-box'); const simpleJekyllSearch = SimpleJekyllSearch({ searchInput: searchInput ,resultsContainer: document.getElementById('search-results') ,json: jsonData ,searchResultTemplate: '<li> <a href="{url}"><div><div class="title">{title}</div><div class="date">{date}</div><div style="clear: both;"></div></div></a></li>' ,noResultsText: '<li>何も見つかりませんでした。</li>' ,limit: 10 ,fuzzy: false ,formSubmit: document.getElementById('searchbox-form') }); if (searchParam) { searchInput.value = searchParam; searchInput.focus(); searchInput.disabled=false; setTimeout(function(){ simpleJekyllSearch.search(searchParam); }, 400); } } </script> <script> let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "MrGreensWorkshop/comments", "data-repo-id": "R_kgDOI4CvPA", "data-category": "mrgreensworkshop", "data-category-id": "DIC_kwDOI4CvPM4CUDTQ", "data-mapping": "pathname", "data-strict": "1", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-input-position": "bottom", "data-theme": giscusGetColorTheme(), "data-lang": "ja", "data-loading": "lazy", "crossorigin": "anonymous", "async": "" }; function engineLoader() { let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("giscus_thread").appendChild(giscusScript); } /* set giscus theme, when data-color-scheme changes. (dark, light) */ function giscusGetColorTheme() { let theme = "light_protanopia"; if (document.body.dataset.colorScheme == "light") { theme = "light_protanopia"; } else if (document.body.dataset.colorScheme == "dark") { theme = "dark_protanopia"; } return theme; } function giscusSetColorScheme() { function giscusSetConfig(config) { const giscusIframe = document.querySelector('iframe.giscus-frame'); if (!giscusIframe) return; giscusIframe.contentWindow.postMessage({ giscus: config }, 'https://giscus.app'); } giscusSetConfig({ setConfig: { theme: giscusGetColorTheme() } }); } const color_scheme_observer = new MutationObserver(giscusSetColorScheme); color_scheme_observer.observe(document.body, {attributeFilter: ["data-color-scheme"]}); /* load when slide to the end of page */ let isMobile = false; function page_bottom_Check(event) { let wind = event.target.scrollingElement; let showBeforeEndOffset = 50; if (isMobile) { /* mobile fix */ showBeforeEndOffset += 56; } if (wind.offsetHeight + wind.scrollTop >= wind.scrollHeight - commentPageOffset - showBeforeEndOffset) { engineLoader(); document.removeEventListener('scroll', page_bottom_Check); slideToComments(); } } const commentPageOffset = document.querySelector('#comment_thread').clientHeight; document.addEventListener('scroll', page_bottom_Check); window.addEventListener("load", function() { isMobile = navigator.userAgent.toLowerCase().match(/mobile/i); let checkScroll = true; if (isMobile) { /* mobile fix */ clientHeight = document.documentElement.clientHeight + 56; } else { clientHeight = document.documentElement.clientHeight; } const scroll_enabled = document.documentElement.scrollHeight > clientHeight; if (checkScroll == true && scroll_enabled == false) { /* if no scroll bar, load at startup */ document.removeEventListener('scroll', page_bottom_Check); engineLoader(); slideToComments(); } }); /* scroll to page bottom to see comments. */ function slideToComments() { document.getElementById('comment_thread').style.minHeight = '324px'; window.scrollTo(0, document.body.scrollHeight); } </script> <script> CookieConsent.consentSettingHtml = "<div class=\"consent-settings\"><h5>クッキー設定</h5><br><p class=\"info-text\">当Webサイトは、機能を最適化するためにクッキーを使用しています。 承認後に有効になります。クッキーポリシーについては、以下の各項目をクリックしてください。</p><table><tr><td onclick=\"$('.info[data-consent-info=necessary]').slideToggle();$(this).children('i').toggleClass('fa-plus-square-o').toggleClass('fa-minus-square-o')\"> <i class=\"fa-fw fa fa-plus-square-o\" aria-hidden=\"true\"></i><p>不可欠なクッキー</p></td><td> <span class=\"active_text\">常時有効</span></td></tr></table><div class=\"info\" data-consent-info=\"necessary\"><p>このCookieは、Webサイトの機能に不可欠であり、無効にすることはできません。 通常、配色などのサイト機能を変更したときに設定されます。 このCookieには、個人を特定できる情報は保存されません。 認証機能、不正行為防止、その他のユーザー保護など、 セキュリティに関連する保存を有効にします。</p></div><table><tr><td onclick=\"$('.info[data-consent-info=analytics]').slideToggle();$(this).children('i').toggleClass('fa-plus-square-o').toggleClass('fa-minus-square-o')\"> <i class=\"fa-fw fa fa-plus-square-o\" aria-hidden=\"true\"></i><p>パフォーマンスクッキー</p></td><td> <span class=\"active_text\">常時有効</span></td></tr></table><div class=\"info\" data-consent-info=\"analytics\"><p>訪問時の滞在時間などの分析に関連する保存（Cookie など）を有効にします。</p></div><table><tr><td onclick=\"$('.info[data-consent-info=preferences]').slideToggle();$(this).children('i').toggleClass('fa-plus-square-o').toggleClass('fa-minus-square-o')\"> <i class=\"fa-fw fa fa-plus-square-o\" aria-hidden=\"true\"></i><p>機能性クッキー</p></td><td> <label class=\"slide-switch\"> <input type=\"checkbox\" class=\"checkbox_switch\" data-consent=\"preferences\"> <span class=\"slider\"></span> </label></td></tr></table><div class=\"info\" data-consent-info=\"preferences\"><p>Webサイトまたはアプリの機能（言語設定など）をサポートする保存を有効にします。 おすすめの動画など、パーソナライズに関連する保存を有効にします。</p></div><table><tr><td onclick=\"$('.info[data-consent-info=advertising]').slideToggle();$(this).children('i').toggleClass('fa-plus-square-o').toggleClass('fa-minus-square-o')\"> <i class=\"fa-fw fa fa-plus-square-o\" aria-hidden=\"true\"></i><p>ターゲティング広告クッキー</p></td><td> <label class=\"slide-switch\"> <input type=\"checkbox\" class=\"checkbox_switch\" data-consent=\"advertising\"> <span class=\"slider\"></span> </label></td></tr></table><div class=\"info\" data-consent-info=\"advertising\"><p>広告に関連する保存（Cookie など）を有効にします。</p></div><br><div class=\"button-holder\"> <a href=\"javascript:void(0);\" class=\"btn-base btn-left\" onclick=\"CookieConsent.consentSettingDone('deny');\" role=\"button\" rel=\"nofollow\">拒否</a> <a href=\"javascript:void(0);\" class=\"btn-base btn-priority\" onclick=\"CookieConsent.consentSettingDone('accept');\" role=\"button\" rel=\"nofollow\">全て許可</a> <a href=\"javascript:void(0);\" class=\"btn-base \" onclick=\"CookieConsent.consentSettingDone('save');\" role=\"button\" rel=\"nofollow\">選択を許可</a></div></div>"; CookieConsent.consentSettingSlideType = 'slideBoxTopToDown'; CookieConsent.consentBarHtml = "<div class=\"consent-bar\"> <a class=\"close-button\" href=\"javascript:void(0);\" onclick=\"CookieConsent.hideConsentBar();\" aria-label=\"閉じる\" role=\"button\" rel=\"nofollow\"><i class=\"fa-fw fa fa-times\"></i></a><p>当Webサイトは、機能を最適化するためにクッキーを使用しています。 承認後に有効になります。</p><a href=\"javascript:void(0);\" class=\"btn-base \" onclick=\"CookieConsent.consentBarDone('deny');\" role=\"button\" rel=\"nofollow\">拒否</a> <a href=\"javascript:void(0);\" class=\"btn-base \" onclick=\"CookieConsent.consentBarDone('settings');\" role=\"button\" rel=\"nofollow\">設定</a> <a href=\"javascript:void(0);\" class=\"btn-base btn-priority\" onclick=\"CookieConsent.consentBarDone('accept');\" role=\"button\" rel=\"nofollow\">全て許可</a></div>"; CookieConsent.consent_items = JSON.parse('{"necessary":{"group":["security_storage"],"value":"granted","wait_for_update":500,"cookie_domain":"www.mrgreensworkshop.com","no_check_box":true},"analytics":{"group":["analytics_storage"],"value":"granted","no_check_box":true},"preferences":{"group":["functionality_storage","personalization_storage"],"value":"denied"},"advertising":{"group":["ad_storage"],"value":"denied"}}'); CookieConsent.hideConsentBarWithSaveButton = true; const consent_settings = CookieConsent.getConsentSettings(); const default_configs = JSON.parse('{"anonymize_ip":true,"ads_data_redaction":true,"cookie_flags":"SameSite=None;Secure"}'); </script> <script> window.dataLayer = window.dataLayer || []; function gtag() {dataLayer.push(arguments);} CookieConsent.gtag = gtag; if (Object.keys(consent_settings).length > 0) gtag("consent", "default", consent_settings); if (Object.keys(default_configs).length > 0) gtag("set", default_configs); </script><script defer src="https://www.googletagmanager.com/gtag/js?id=G-SC87NNMPP8"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() {dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-SC87NNMPP8'); </script> <script> LangOfferMsgBox.currentPageLng = "ja"; LangOfferMsgBox.supportedLngList = [["en","En","/","View this page in English.","To home","Language"],["ja","Jp","/ja","このページを日本語で表示する。","日本語ホームへ","言語"]]; LangOfferMsgBox.existLng = [["en","En","/posts/2022-05-29-diy-3d-printer-part-2"]]; LangOfferMsgBox.disableExtTranslationOffer = true; LangOfferMsgBox.slideType = 'slideBoxTopToDown'; </script> <script> SlidingMsgBox.html = "<div class=\"slideBox\"> <a class=\"close-button\" href=\"javascript:void(0);\" aria-label=\"閉じる\" role=\"button\" rel=\"nofollow\"><i class=\"fa-fw fa fa-times\"></i></a></div>"; </script></body></html>
